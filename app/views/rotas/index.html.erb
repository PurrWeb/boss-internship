<h1 class="page-header row mb-xl">
  <div class="shrink column">
    <%= venue.name %> Rotas
  </div>
  <div class="shrink column">
    <small><%= start_date.to_s(:human_date) %> - <%= end_date.to_s(:human_date) %></small>
  </div>
</h1>

<%= javascript_tag do %>
  var rotas = [];
  var venues;

  rotas = <%= api_v1_collection_json(rotas, Api::V1::RotaOverviewSerializer, { staff_types: staff_types }) %>;
  venues = <%= api_v1_collection_json(accessible_venues, Api::V1::VenueSerializer) %>;
  rotaForecasts = <%= api_v1_collection_json(rota_forecasts, Api::V1::RotaForecastSerializer) %>;

  window.boss = window.boss || {};
  window.boss.store = window.boss.store || {};
  window.boss.store.rotas = rotas;
  window.boss.store.venues = venues;
  window.boss.store.rotaForecasts = rotaForecasts;
  window.boss.store.access_token = "<%= access_token.token %>";

  window.boss.store.weeklyRotaForecast = <%= Api::V1::WeeklyRotaForecastSerializer.new(weekly_rota_forecast, scope: { week: week }).to_json.html_safe %>;

  window.boss.store.startDate = "<%= start_date.iso8601 %>";
  window.boss.store.endDate = "<%= end_date.iso8601 %>";
<% end %>

<%= react_component('RotaOverviewApp') %>
