<%= javascript_tag do %>
  rotaData = {};

  rotaData.rotas = <%= ActiveModel::Serializer::CollectionSerializer.new(rotas, serializer: Api::V1::RotaSerializer).to_json.html_safe %>;

  rotaData.staff_types = <%= ActiveModel::Serializer::CollectionSerializer.new(staff_types, serializer: Api::V1::StaffTypeSerializer).to_json.html_safe %>;

  rotaData.rota_shifts = <%= ActiveModel::Serializer::CollectionSerializer.new(rota_shifts, serializer: Api::V1::RotaShiftSerializer).to_json.html_safe %>;

  rotaData.staff_members = <%= ActiveModel::Serializer::CollectionSerializer.new(staff_members, serializer: Api::V1::StaffMemberSerializer).to_json.html_safe %>;

  rotaData.venues = <%= ActiveModel::Serializer::CollectionSerializer.new(venues, serializer: Api::V1::VenueSerializer).to_json.html_safe %>;

  rotaData.holidays = <%= ActiveModel::Serializer::CollectionSerializer.new(holidays, serializer: Api::V1::HolidaySerializer).to_json.html_safe %>;

  window.boss = window.boss || {};
  window.boss.access_token = "<%= access_token.token %>";
  window.boss.rota = rotaData;

  window.boss.rotaVenueId = <%= current_rota.venue.id %>;
  window.boss.rotaDate = "<%= current_rota.date.iso8601 %>";
<% end %>

<%= react_component('RotaApp') %>
