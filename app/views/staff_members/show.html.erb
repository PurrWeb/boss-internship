<div class="media">
  <div class="media-left">
    <div class="staff-member-page-staff-image">
      <img class="avatar-image avatar-image_medium" src="<%= staff_member.avatar.medium.url %>" />
      <% if staff_member.enabled? %>
        <%= link_to('Edit', edit_avatar_staff_member_path(staff_member), class: "btn btn-primary btn-xs") %>
      <% end %>
    </div>
  </div>
  <div class="media-body">
    <h1 class="media-heading">
      <% if staff_member.flagged? %>
        <%= staff_member.full_name.titlecase %>
        <span class="text-danger">
          <span class="glyphicon glyphicon-warning-sign"></span> Flagged
        </span>
      <% elsif staff_member.disabled? %>
        <%= staff_member.full_name.titlecase %> (Disabled)
      <% else %>
        <%= staff_member.full_name.titlecase %>
      <% end %>
    </h1>
    <% if staff_member.disabled? %>
      <p class="h4">Disabled by: <%= staff_member.disabled_by_user.full_name.titlecase %> on <%= staff_member.disabled_at.to_s(:human_date) %></p>
      <p class="h4">Reason for disabling: <%= staff_member.disable_reason %></p>
    <% end %>
  </div>
  <div class="media-right">
    <% if can?(:disable, staff_member) %>
      <%= link_to(disable_staff_member_path(staff_member), class: 'btn btn-danger disable-staff-member-button') do %>
        <span class="glyphicon glyphicon-fire"></span> Disable Staff Member
      <% end %>
    <% end %>
    <% if can?(:enable, staff_member) %>
      <%= link_to(enable_staff_member_path(staff_member), class: 'btn btn-danger enable-staff-member-button') do %>
        <span class="glyphicon glyphicon-heart"></span> Enable Staff Member
      <% end %>
    <% end %>
  </div>
</div

<div class="container-fluid">
  <ul class="nav nav-tabs staff-member-nav-tabs" role="tablist">
    <li role="presentation" class="<%= StaffMemberShowPage.tab_class('employment-details', active_tab) %>">
      <a data-push-state-url="<%= staff_member_path(staff_member, tab: 'employment-details') %>" data-target="#employment-tab">
        Employment Details
      </a>
    </li>
    <li role="presentation" class="<%= StaffMemberShowPage.tab_class('account-details', active_tab) %>">
      <a data-push-state-url="<%= staff_member_path(staff_member, tab: 'account-details') %>" data-target="#account-tab">Account Details</a>
    </li>
    <li role="presentation" class="<%= "active" if active_tab == 'personal-details' %>">
      <a data-push-state-url="<%= staff_member_path(staff_member, tab: 'personal-details') %>" data-target="#personal-tab">Personal Details</a>
    </li>
    <li role="presentation" class="<%= StaffMemberShowPage.tab_class('contact-details', active_tab) %>">
      <a data-push-state-url="<%= staff_member_path(staff_member, tab: 'contact-details') %>" data-target="#contact-tab">Contact Details</a>
    </li>
    <li role="presentation" class="<%= StaffMemberShowPage.tab_class('holidays', active_tab) %>">
      <a data-push-state-url="<%= staff_member_path(staff_member, tab: 'holidays') %>" data-target="#holidays-tab">Holidays</a>
    </li>
    <li role="presentation" class="<%= StaffMemberShowPage.tab_class('owed-hours', active_tab) %>">
      <a data-push-state-url="<%= staff_member_path(staff_member, tab: 'owed-hours') %>" data-target="#owed-hours-tab">Owed Hours</a>
    </li>
  </ul>

  <div class="tab-content">
    <div class="tab-pane container-fluid <%= StaffMemberShowPage.tab_class('employment-details', active_tab) %>" id="employment-tab">
      <%= render partial: 'shared/staff_member_show_employment_details_tab', locals: { staff_member: staff_member } %>
    </div>

    <div class="tab-pane container-fluid <%= StaffMemberShowPage.tab_class('account-details', active_tab) %>" id="account-tab">
      <%= render partial: 'shared/staff_member_show_account_details_tab', locals: { staff_member: staff_member } %>
    </div>

    <div class="tab-pane container-fluid <%= StaffMemberShowPage.tab_class('personal-details', active_tab) %>" id="personal-tab">
      <%= render partial: 'shared/staff_member_show_personal_details_tab', locals: { staff_member: staff_member } %>
    </div>

    <div class="tab-pane container-fluid <%= StaffMemberShowPage.tab_class('contact-details', active_tab) %>" id="contact-tab">
      <%= render partial: 'shared/staff_member_show_contact_details_tab', locals: { staff_member: staff_member } %>
    </div>

    <div class="tab-pane container-fluid <%= StaffMemberShowPage.tab_class('holidays', active_tab) %>" id="holidays-tab">
      <%= render partial: 'shared/staff_member_show_holidays_tab', locals: { staff_member: staff_member, holiday: holiday } %>
    </div>

    <div class="tab-pane container-fluid <%= StaffMemberShowPage.tab_class('owed-hours', active_tab) %>" id="owed-hours-tab">
      <%= render partial: 'shared/staff_member_show_owed_hours_tab', locals: { staff_member: staff_member, owed_hours_week: owed_hours_week, owed_hour: owed_hour } %>
    </div>
  </div>
</div>
