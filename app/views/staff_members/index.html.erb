<h1>Staff Members</h1>

<%= link_to('Add Staff Member', new_staff_member_path, class: ['btn', 'btn-primary']) %>
<%= link_to('Staff Types', staff_types_path, class: ['btn', 'btn-success']) %>

<div class="staff-members-index-filter">
  <div class="panel panel-default">
    <div class="panel-heading">
      <div class="panel-title">Filter</div>
    </div>
    <div class="panel-body">
      <div>
        <%= bootstrap_form_for(
              'filter',
              url: staff_members_path,
              html: { method: :get, class: 'form-inline' }
            ) do |form| %>
          <%= form.select(
                :staff_type,
                options_for_select(
                  StaffType.all.map{ |type| [type.name.titlecase, type.id] },
                  filter.staff_type.try(:id)
                ),
                include_blank: true
              ) %>
          <%= form.submit('Update') %>
        <% end %>
      </div>
    </div>
  </div>
  <div><span class="records-returned-count"><%= staff_members.count %></span> records returned</div>
</div>


<% if staff_members.present? %>
  <table class="table">
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Venue</th>
    <tr>
    <% staff_members.each do |staff_member| %>
      <tr class="staff-members-index-listing" data-staff-member-id="<%= staff_member.id %>">
        <td data-role="name"><%= link_to(staff_member.full_name, staff_member_path(staff_member)) %></td>
        <td data-role="staff-type">
          <%= link_to(staff_member.staff_type.name.titlecase, staff_member_path(staff_member)) %>
        </td>
        <td data-role="venue"><%= link_to("#{staff_member.venue.try(:name) || 'N / A'}", staff_member_path(staff_member)) %></td>
      </tr>
    <% end %>
  </table>
<% end %>
