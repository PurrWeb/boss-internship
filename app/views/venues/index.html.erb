<h1>Venues</h1>

<%= link_to('Add Venue', new_venue_path, class: ['btn', 'btn-primary']) %>

<% if venues.present? %>
  <table class="table table-striped" style="text-align: center;">
    <tr>
      <th style="text-align: center;">Name</th>
      <th style="text-align: center;">Staff</th>
      <th style="text-align: center;">Fruit Order Fields</th>
      <th style="text-align: center;"></th>
    <tr/>
    <% venues.each do |venue| %>
      <tr class="venues-index-listing" data-venue-id="<%= venue.id %>">
        <td data-role="name"><%= venue.name %></td>

        <td data-role="staff-count">
          <%= link_to(StaffMember.for_venue(venue).enabled.count, staff_members_path(staff_member_index_filter: { venue: venue.id })) %>
        </td>
        <td><%= venue.fruit_order_fields.map(&:to_s).map(&:humanize).to_sentence %></td>
        <td>
          <%= link_to('Edit', edit_venue_path(venue), class: 'btn btn-success') %>
        </td>
      </tr>
    <% end %>
  </table>
  <%= render partial: 'shared/pagination_control', locals: { relation: venues } %>
<% end %>
