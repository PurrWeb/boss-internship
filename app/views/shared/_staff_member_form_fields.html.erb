<%= form.fields_for(:staff_member_venue, (form.object.staff_member_venue || form.object.build_staff_member_venue)) do |venue_fields| %>
  <%= venue_fields.select(
        :venue_id,
        options_for_select(
          Venue.all.map { |venue| [venue.name.titlecase, venue.id] },
          venue_fields.object.try(:venue_id)
        ),
        include_blank: true
      ) %>
<% end %>
<% if form.object.avatar? %>
  <%= image_tag(form.object.avatar_url, class: "avatar_preview", height: 120, width: 120) %>
<% end %>
<%= form.file_field(:avatar) %>
<%= form.hidden_field(:avatar_cache) %>
<%= form.select(:gender, options_for_select(StaffMember::GENDERS.map{ |role| [role.titleize, role] }, form.object.gender), include_blank: true, label_class: 'required') %>
<% if edit_name %>
  <%= form.fields_for(:name, (form.object.name || Name.new)) do |name_fields| %>
    <%= render partial: 'shared/name_fields', locals: { form: name_fields } %>
  <% end %>
<% end %>

<% if edit_email %>
  <%= form.fields_for(:email_address, (form.object.email_address || EmailAddress.new)) do |email_address_fields| %>
    <%= render partial: 'shared/email_address_fields', locals: { form: email_address_fields } %>
  <% end %>
<% end %>
<%= form.select(
      :staff_type,
      options_for_select(
        StaffType.all.map{ |type| [type.name.titleize, type.id] },
        form.object.staff_type.try(:id)
      ),
      include_blank: true,
      label_class: 'required',
      html: {
        name: :staff_type_id
      }
    )
%>
<%= form.number_field :pin_code %>
<%= form.number_field :phone_number %>
<%= form.text_field :national_insurance_number %>

<%= form.date_select :date_of_birth, start_year: Time.now.year, end_year: 1940, include_blank: true %>
<%= form.fields_for(:address, (form.object.address || Address.new)) do |address_fields| %>
  <%= render partial: 'shared/address_fields', locals: { form: address_fields } %>
<% end %>
