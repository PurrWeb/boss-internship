<div class="title-bar hide-for-print" data-responsive-toggle="main-menu" data-hide-for="small">
  <button class="menu-icon" type="boss2-button" data-toggle></button>
  <div class="title-bar-title">Menu</div>
</div>

<div class="boss2-main-menu" id="main-menu">
    <%= link_to(
          'BOSS',
          root_path,
          class: 'boss2-main-menu__logo-button menu-text',
          data: { "link-role" => "navbar-brand" }
        ) %>
    <ul class="boss2-main-menu__buttons boss2-main-menu__buttons_type_primary dropdown menu align-right" data-dropdown-menu>
        <% if current_user.present? %>
          <% if can?(:manage, :staff_members) %>
              <li class="boss2-main-menu__button nav-staff-members-section">
                <%= link_to('Staff Members', staff_members_path, class: "boss2-main-menu__button-link") %>
              </li>
          <% end %>

          <% if can?(:manage, :rotas) %>
              <% if Venue.count > 0 && !(current_user.manager? && current_user.venues.count == 0) %>
                  <li class="boss2-main-menu__button nav-rota-section">
                    <%= link_to('Rota', rotas_path, class: "boss2-main-menu__button-link") %>
                  </li>
              <% end %>
          <% end %>

          <% if can?(:view, :holidays) %>
              <li class="boss2-main-menu__button nav-holiday-reports-section">
                <%= link_to('Holidays', holidays_path(date: UIRotaDate.format(Time.zone.now.to_date.monday)), class: "boss2-main-menu__button-link") %>
              </li>
          <% end %>

          <% if can?(:manage, :security_rota) %>
              <li class="boss2-main-menu__button nav-security-rota-section">
                <%= link_to(security_rotas_path, class: "boss2-main-menu__button-link") do %>
                    Security Rota
                <% end %>
              </li>
          <% end %>

          <% if can?(:manage, :change_orders) %>
              <li class="boss2-main-menu__button nav-change-orders-section">
                <%= link_to('Change Orders', change_orders_path, class: 'boss2-main-menu__button-link') %>
              </li>
          <% end %>

          <% if can?(:manage, :fruit_orders) %>
              <li class="boss2-main-menu__button nav-fruit-orders-section">
                <%= link_to('Fruit Orders', fruit_orders_path, class: 'boss2-main-menu__button-link') %>
              </li>
          <% end %>

          <% if !current_user.security_manager? %>
              <li class="boss2-main-menu__button nav-hours-confirmation-section">
                <%= link_to('Hours Confirmation', current_hours_confirmation_index_path, class: 'boss2-main-menu__button-link') %>
              </li>
          <% end %>

          <% if !current_user.security_manager? %>
              <li class="boss2-main-menu__button">
                <%= link_to('Safe Checks', safe_checks_path, class: "boss2-main-menu__button-link") %>
              </li>
          <% end %>

          <li class="boss2-main-menu__button boss2-main-menu__button_type_dropdown">
            <a class="boss2-main-menu__button-link" href="#">
              Reports
            </a>
            <ul class="boss2-submenu menu vertical">
              <% if can?(:view, :daily_reports) %>
                  <li class="nav-hours-daily-reports-section">
                    <%= link_to('Daily Reports', daily_reports_path) %>
                  </li>
              <% end %>
              <% if can?(:view, :weekly_reports) %>
                  <li class="nav-hours-weekly-reports-section">
                    <%= link_to('Weekly Reports', weekly_reports_path) %>
                  </li>
              <% end %>
              <% if can?(:view, :payroll_reports) %>
                  <li class="nav-hours-payroll-reports-section">
                    <%= link_to('Payroll Reports', payroll_reports_path) %>
                  </li>
              <% end %>
            </ul>
          </li>
    </ul>
    <ul class="boss2-main-menu__buttons boss2-main-menu__buttons_type_secondary dropdown menu align-right" data-dropdown-menu>
              <% if can?(:manage, :admin) %>
                <li class="boss2-main-menu__button boss2-main-menu__button_type_dropdown">
                  <a class="boss2-main-menu__button-link" href="#">
                    Admin
                  </a>
                  <ul class="boss2-submenu nav-admin-section menu vertical">
                    <li class="nav-invites-section">
                      <%= link_to('Invites', invites_path) %>
                    </li>

                    <li class="nav-users-section">
                      <%= link_to('Users', users_path) %>
                    </li>

                    <li class="nav-venues-section">
                      <%= link_to('Venues', venues_path) %>
                    </li>

                    <% if can?(:manage, :admin) %>
                        <li class="nav-staff-types-section">
                          <%= link_to('Staff Types', staff_types_path) %>
                        </li>
                    <% end %>

                    <li class="nav-pay-rates-section">
                      <%= link_to('Pay rates', pay_rates_path) %>
                    </li>

                    <li class="nav-admin-change-orders-section">
                      <%= link_to('Change Order Reports', change_order_reports_path) %>
                    </li>

                    <li class="nav-admin-fruit-orders-section">
                      <%= link_to('Fruit Order Reports', fruit_order_reports_path) %>
                    </li>

                    <li class="nav-admin-finance-reports-section">
                      <%= link_to('Finance Reports', finance_reports_path) %>
                    </li>

                    <li class="nav-admin-api-keys-section">
                      <%= link_to('Staff Tracking', staff_tracking_index_path) %>
                    </li>

                    <li class="nav-admin-staff-vetting-section">
                      <%= link_to('Staff Vetting', staff_vetting_index_path) %>
                    </li>

                    <li class="nav-admin-api-keys-section">
                      <%= link_to('API Keys', api_keys_path) %>
                    </li>

                    <% if current_user.dev? %>
                        <li class="nav-admin-error-test-section">
                          <%= link_to('Error Test', rollbar_error_test_index_path) %>
                        </li>
                    <% end %>
                  </ul>
                </li>
            <% end %>

            <li class="boss2-main-menu__button boss2-main-menu__button_type_dropdown" data-navbar-section="user">
              <a class="boss2-main-menu__button-link" href="#">Signed in as <%= current_user.email %></a>
              <ul class="boss2-submenu menu vertical">
                <li><%= link_to('Sign out', destroy_user_session_path, method: :delete) %></li>
              </ul>
          </li>
      <% end %>
    </ul>
</div>
