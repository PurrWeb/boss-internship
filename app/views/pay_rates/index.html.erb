<h1>Pay Rates</h1>

<p>These pay rates will be visible and selectable by all managers</p>

<%= link_to('Add Rate', new_pay_rate_path, class: ['btn', 'btn-primary']) %>

<% if pay_rates.present? %>
  <table class="table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Staff Members</th>
        <th>Calculation Type</th>
        <th>Rate</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% pay_rates.each do |pay_rate| %>
        <tr>
          <td><%= pay_rate.name %></td>
          <td><%= link_to(pay_rate.staff_members.enabled.count, staff_members_pay_rate_path(pay_rate)) %></td>
          <td><%= PayRate.calculation_type_display_name(pay_rate.calculation_type) %></td>
          <td><%= number_to_currency(pay_rate.rate_in_pounds, unit: '£', precision: 2) %></td>
          <td>
            <%= link_to('Edit', edit_pay_rate_path(pay_rate), class: 'btn btn-success') %>
            <% if pay_rate.deletable? %>
              <%= link_to('Delete', pay_rate_path(pay_rate), method: 'DELETE', class: 'btn btn-danger') %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>No normal pay rates exist</p>
<% end %>

<h2>Admin Pay rates</h2>

<p>These will only be visible and selectable to users with admin access</p>

<%= link_to('Add Admin Rate', new_admin_pay_rate_path, class: ['btn', 'btn-primary']) %>

<% if admin_pay_rates.present? %>
  <table class="table">
    <thead>
      <tr>
        <th>Name</th>
        <th>Staff Members</th>
        <th>Calculation Type</th>
        <th>Rate</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      <% admin_pay_rates.each do |admin_pay_rate| %>
        <tr>
          <td><%= admin_pay_rate.name %></td>
          <td><%= link_to(admin_pay_rate.staff_members.enabled.count, staff_members_pay_rate_path(admin_pay_rate)) %></td>
          <td><%= PayRate.calculation_type_display_name(admin_pay_rate.calculation_type) %></td>
          <td><%= number_to_currency(admin_pay_rate.rate_in_pounds, unit: '£', precision: 2) %></td>
          <td>
            <%= link_to('Edit', edit_pay_rate_path(admin_pay_rate), class: 'btn btn-success') %>
            <% if admin_pay_rate.deletable? %>
              <%= link_to('Delete', pay_rate_path(admin_pay_rate), method: 'DELETE', class: 'btn btn-danger') %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>No admin pay rates exist</p>
<% end %>
